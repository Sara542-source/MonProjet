<div class="container mt-5">
  <div class="card shadow-sm border-0">
    <div class="card-header bg-primary text-white d-flex align-items-center">
      <i class="bi bi-bar-chart-fill me-2 fs-4"></i>
      <h5 class="mb-0">Statistiques des Comptes</h5>
    </div>
    <div class="card-body bg-light">
      <div *ngIf="errorMessage" class="alert alert-danger mb-3">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>{{ errorMessage }}
      </div>

      <div *ngIf="!errorMessage && chartData.datasets.length">
        <div class="chart-container mb-4">
          <canvas baseChart
            [data]="chartData"
            [options]="chartOptions"
            [type]="chartType"
            height="80">
          </canvas>
        </div>
        <div class="stat-legend row justify-content-center">
          <div *ngFor="let dataset of chartData.datasets; let i = index" class="col-auto d-flex align-items-center mb-2">
            <span class="legend-dot me-2" [style.background]="dataset.borderColor || colorPalette[i % colorPalette.length]"></span>
            <span class="legend-label fw-semibold small">{{ dataset.label }}</span>
          </div>
        </div>
      </div>

      <div *ngIf="!errorMessage && !chartData.datasets.length">
        <div class="text-center text-secondary py-4">
          <div class="spinner-border text-primary mb-2" role="status"><span class="visually-hidden">Loading...</span></div>
          <div>Chargement du graphique des transactionsâ€¦</div>
        </div>
      </div>
    </div>
  </div>
</div>